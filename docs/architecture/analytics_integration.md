# Learning Analytics Integration Pipeline

**Location:** `/docs/architecture/analytics_integration.md`

## Overview

This document describes the design and implementation of the integrated learning analytics and intervention pipeline developed for Day 18.

## Pipeline Stages

1. **Progress Data Logging**
    - Progress records generated by student activity (quizzes, videos, assignments) are collected.

2. **Pattern Detection**
    - See `app/core/monitoring/pattern_detection.py`.
    - Function: `run_pattern_detection(progress_records)`
    - Detects patterns such as at-risk status, completion rates, inactivity, and low performance.

3. **Data Aggregation**
    - Function: `aggregate_learning_data(records)`
    - Aggregates by student and by activity.
    - Output format:
      ```python
      {
          "by_student": { "1": [ ... ], ... },
          "by_activity": { "quiz": {"count": 2, "records": [...]}, ... }
      }
      ```

4. **Intervention Triggering**
    - Function: `should_trigger_intervention(analytics)`
    - Determines if analytics justify an intervention (e.g., high risk).

5. **Intervention Creation**
    - Function: `create_intervention(student_id, pattern)`
    - Produces an intervention object with keys: `"student_id"`, `"type"`, `"intervention"`.

6. **Notification (if needed)**
    - Professors notified via `notify_professor_at_risk_students`.

## File/Module Locations

| Stage                  | Implementation File                                   |
|------------------------|------------------------------------------------------|
| Data Logging           | app/core/monitoring/metrics.py                       |
| Pattern Detection      | app/core/monitoring/pattern_detection.py              |
| Aggregation            | app/core/monitoring/pattern_detection.py              |
| Intervention Logic     | app/core/monitoring/interventions.py                 |
| Notification           | app/core/monitoring/interventions.py                 |
| Testing                | tests/integration/test_learning_analytics_integration.py |

## Extensibility

- Add new analytics patterns by extending `run_pattern_detection`.
- Extend data aggregation by editing `aggregate_learning_data`.
- Add new intervention types in `create_intervention`.

## References

- See `/docs/api/assessment_delivery_workflow.md` and `/docs/api/feedback_format_specifications.md` for related student-facing UX flows.